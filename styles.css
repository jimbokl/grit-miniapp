:root { --bg:#0f1115; --card:#151823; --text:#e6e8ee; --muted:#9aa3b2; --primary:#6ea8fe; --success:#63d297; --border:#262b3a; }
*{box-sizing:border-box}
html,body{height:100%}
body{margin:0;background:var(--bg);color:var(--text);font:16px/1.5 system-ui,-apple-system,Segoe UI,Roboto,sans-serif}
.container{max-width:720px;margin:0 auto;padding:12px 12px 84px}
.sr-only{position:absolute;width:1px;height:1px;clip:rect(0,0,0,0);overflow:hidden}

/* Header */
.header{display:grid;grid-template-columns:44px 1fr 44px;align-items:center;gap:10px;margin:6px 0 10px}
.avatar{width:40px;height:40px;border-radius:50%;display:grid;place-items:center;background:#243;letter-spacing:.5px}
.level-text{font-size:14px;color:var(--muted)}
.level-text .lvl{opacity:.8;margin-right:4px}
.lvl-bar{height:4px;background:#0d0f15;border:1px solid var(--border);border-radius:999px;overflow:hidden;margin-top:6px}
.lvl-bar__fill{height:100%;background:var(--primary)}
.icon-btn{background:transparent;border:1px solid var(--border);color:var(--text);border-radius:10px;padding:6px 8px;cursor:pointer}

/* Cards & widgets */
.card{background:var(--card);border:1px solid var(--border);border-radius:12px;padding:14px;margin:10px 0}
.card-title{font-weight:700;margin:0 0 8px}
.focus-card{position:relative}
.focus-check{display:flex;align-items:center;gap:10px}
.focus-check input{display:none}
.focus-circle{width:22px;height:22px;border-radius:50%;border:2px solid var(--primary);display:inline-block;position:relative}
.focus-check input:checked + .focus-circle{background:var(--primary)}
.focus-check input:checked + .focus-circle::after{content:"";position:absolute;inset:4px;background:#0b1020;border-radius:50%}
.focus-text{font-weight:600}
.focus-done-banner{display:none;margin-top:8px;color:var(--success)}
.focus-check input:checked ~ .focus-done-banner{display:block}

.widgets{display:grid;grid-template-columns:1fr 1fr;gap:10px}
.widget{background:var(--card);border:1px solid var(--border);border-radius:12px;padding:12px}
.w-title{color:var(--muted);font-size:13px}
.w-value{font-size:18px;margin-top:4px}
.w-sub{color:var(--muted);font-size:12px}

/* Effort ring */
.effort-ring{width:110px;height:110px;border-radius:50%;background:conic-gradient(var(--success) calc(var(--val,85)*1%), #222 0);display:grid;place-items:center;margin-top:8px}
.effort-ring__inner{width:86px;height:86px;border-radius:50%;display:grid;place-items:center;background:#0d0f15;border:1px solid var(--border)}

/* Goals compact */
.gl-list{list-style:none;margin:0;padding:0;display:grid;gap:8px}
.gl-title{font-weight:600}
.gl-bar{height:6px;background:#0d0f15;border:1px solid var(--border);border-radius:999px;overflow:hidden;margin-top:6px}
.gl-fill{height:100%;background:var(--primary)}

/* Accordion */
.accordion details{background:var(--card);border:1px solid var(--border);border-radius:10px;margin:8px 0;padding:8px}
.accordion summary{cursor:pointer;display:flex;justify-content:space-between;align-items:center}
.acc-tasks{list-style:none;margin:8px 0 0;padding:0;display:grid;gap:6px}
.acc-progress{color:var(--muted);font-size:12px}

/* Segmented switch & KPI */
.seg-switch{display:flex;gap:6px;margin-bottom:10px}
.seg{border:1px solid var(--border);background:transparent;color:var(--text);padding:6px 10px;border-radius:999px;cursor:pointer}
.seg.on{background:var(--card);border-color:var(--primary)}
.heatmap-placeholder{height:140px;border:1px dashed var(--border);border-radius:10px;display:grid;place-items:center;color:var(--muted)}
.kpi-grid{display:grid;grid-template-columns:repeat(3,1fr);gap:10px;margin-top:10px}
.kpi{border:1px solid var(--border);border-radius:12px;padding:12px;text-align:center}
.kpi-val{font-size:22px;font-weight:700}
.kpi-label{color:var(--muted);font-size:12px}

/* Chips & exercises */
.chip-row{display:flex;gap:8px;overflow:auto}
.chip{border:1px solid var(--border);background:transparent;color:var(--text);padding:6px 10px;border-radius:999px;cursor:pointer;white-space:nowrap}
.chip.on{background:var(--card);border-color:var(--primary)}
.exercise-list{display:grid;gap:8px}
.ex-item{display:flex;justify-content:space-between}

/* Tab bar */
.tabbar{position:fixed;left:0;right:0;bottom:0;background:rgba(21,24,35,.9);backdrop-filter:blur(8px);border-top:1px solid var(--border);display:grid;grid-template-columns:repeat(5,1fr);z-index:1500}
.tab{appearance:none;background:transparent;border:0;color:var(--muted);padding:8px 0;display:grid;place-items:center;gap:2px;cursor:pointer}
.tab span{font-size:11px}
.tab.on{color:var(--text)}

/* Modal */
.modal.hidden{display:none}
.modal{position:fixed;inset:0;z-index:1000}
.modal-backdrop{position:absolute;inset:0;background:rgba(0,0,0,.55)}
.modal-card{position:relative;max-width:720px;margin:10vh auto;padding:14px;background:var(--card);border:1px solid var(--border);border-radius:12px}
.modal-card h2{margin:0 0 8px}
textarea{width:100%;padding:10px 12px;border-radius:10px;border:1px solid var(--border);background:#0d0f15;color:var(--text)}

/* Buttons */
.btn{appearance:none;border:0;cursor:pointer;padding:10px 14px;border-radius:10px;font-weight:600}
.btn.primary{background:var(--primary);color:#0b1020}
.btn.ghost{background:transparent;color:var(--muted);border:1px solid var(--border)}
.btn.large{width:100%;padding:12px 16px}

/* Responsive tweaks */
@media (max-width:420px){ .container{padding:10px 10px 84px} .header{gap:8px} .exercise-list,.gl-list{gap:6px} }

/* Slide transitions */
.tab-section{will-change: transform}
.slide-in-left{animation: slideInLeft .25s ease both}
.slide-in-right{animation: slideInRight .25s ease both}
.slide-out-left{animation: slideOutLeft .25s ease both}
.slide-out-right{animation: slideOutRight .25s ease both}
@keyframes slideInLeft{from{transform:translateX(-12%);opacity:.01}to{transform:translateX(0);opacity:1}}
@keyframes slideInRight{from{transform:translateX(12%);opacity:.01}to{transform:translateX(0);opacity:1}}
@keyframes slideOutLeft{from{transform:translateX(0);opacity:1}to{transform:translateX(-12%);opacity:.01}}
@keyframes slideOutRight{from{transform:translateX(0);opacity:1}to{transform:translateX(12%);opacity:.01}}

/* Toast (ensure visible above tabbar) */
.toast{position:fixed;left:50%;bottom:72px;transform:translateX(-50%);background:var(--card);color:var(--text);border:1px solid var(--border);border-radius:10px;padding:10px 14px;box-shadow:0 6px 30px rgba(0,0,0,.35);z-index:2000}

/* Forms */
form{display:flex;flex-direction:column;gap:16px}
label.full{display:flex;flex-direction:column;gap:8px}
label.full span{font-weight:500;color:var(--text)}
input,select,textarea{padding:12px;border:1px solid var(--border,#333);border-radius:8px;background:var(--card,#1c1c1e);color:var(--text);font-size:16px;font-family:inherit}
input:focus,select:focus,textarea:focus{outline:none;border-color:var(--primary,#007aff)}
textarea{resize:vertical;min-height:80px}
.result{padding:12px;background:var(--card,#1c1c1e);border-radius:8px;border-left:3px solid var(--primary,#007aff);font-size:14px;line-height:1.4;white-space:pre-wrap}
.result.hidden{display:none}
