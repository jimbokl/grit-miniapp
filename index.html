<!DOCTYPE html>
<html lang="ru">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Grit — Mini App</title>
    <link rel="preconnect" href="https://telegram.org" />
    <link rel="stylesheet" href="./styles.css" />
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
  </head>
  <body>
    <main class="container" id="app-root">
      <div id="onboarding-modal" class="modal" role="dialog" aria-modal="true" aria-labelledby="onb-title">
        <div class="modal-backdrop" data-onb-close></div>
        <div class="modal-card">
          <h2 id="onb-title">Как работать с Grit за день</h2>
          <ul class="onb-list">
            <li><strong>Grit</strong>: держим ритм к долгосрочной цели.</li>
            <li><strong>День</strong>: утро — план; днём — факты; вечер — сверка.</li>
            <li><strong>Шаг</strong>: маленькая победа каждый день важнее идеала.</li>
          </ul>
          <p class="onb-tip">Подсказка: сфокусируйтесь на одном важном действии сегодня.</p>
          <div class="onb-actions">
            <button id="onb-ok" class="btn primary" type="button">Понятно</button>
          </div>
        </div>
      </div>

      <header class="header">
        <h1>Grit-тренер</h1>
        <p class="subtitle">Персональный коуч по настойчивости: цель → ритуал → фокус → прогресс</p>
      </header>

      <nav class="tabs" aria-label="Навигация">
        <button class="tab active" data-tab="grit-test">Grit‑тест</button>
        <button class="tab" data-tab="goals">Цели</button>
        <button class="tab" data-tab="day">День</button>
        <button class="tab" data-tab="stats">Статистика</button>
      </nav>

      <section class="card hidden" data-tab-section="grit-test">
        <h2>Grit‑тест (краткий)</h2>
        <p class="subtitle">Оцените настойчивость по шкале 1–5 (1 — редко, 5 — всегда)</p>
        <form id="grit-form" class="form-grid">
          <label class="full"><span>Я заканчиваю всё, что начинаю</span>
            <select name="q1"><option>1</option><option>2</option><option>3</option><option selected>4</option><option>5</option></select>
          </label>
          <label class="full"><span>Неудачи не выбивают меня из колеи</span>
            <select name="q2"><option>1</option><option>2</option><option selected>3</option><option>4</option><option>5</option></select>
          </label>
          <label class="full"><span>Я работаю усердно каждый день</span>
            <select name="q3"><option>1</option><option>2</option><option>3</option><option selected>4</option><option>5</option></select>
          </label>
          <label class="full"><span>Я долго держу интерес к одной большой цели</span>
            <select name="q4"><option>1</option><option>2</option><option selected>3</option><option>4</option><option>5</option></select>
          </label>
          <button class="btn primary" type="submit">Посчитать</button>
        </form>
        <div id="grit-result" class="onb-result hidden"></div>
      </section>

      <section class="card hidden" data-tab-section="goals">
        <h2>Цели</h2>
        <form id="goals-form" class="form-grid">
          <label class="full"><span>Главная цель</span>
            <input id="goal-main" type="text" placeholder="Напр.: 100 видео за 100 дней" />
          </label>
          <label class="full"><span>Подцели (через запятую)</span>
            <input id="goal-sub" type="text" placeholder="Напр.: сценарии, монтаж, публикация" />
          </label>
          <button class="btn primary" type="submit">Сохранить цели</button>
        </form>
        <div id="goals-saved" class="onb-result hidden"></div>
        <hr style="border-color: var(--border); margin: 12px 0;" />
        <h3 style="margin-top:0">Сгенерировать план удержания фокуса</h3>
        <form id="gen-form" class="form-grid" autocomplete="off">
          <label class="full">
            <span>Задача</span>
            <input id="gen-task" type="text" placeholder="Напр.: Видео каждый день" />
          </label>
          <label>
            <span>Частота</span>
            <select id="gen-frequency">
              <option value="daily">Ежедневно</option>
              <option value="weekdays">Пн–Пт</option>
              <option value="custom">Выбор дней</option>
            </select>
          </label>
          <label>
            <span>Время (мин)</span>
            <input id="gen-time" type="number" min="5" step="5" placeholder="60" />
          </label>
          <label class="full">
            <span>Ограничения</span>
            <input id="gen-constraints" type="text" placeholder="Телефон, вечерние слоты" />
          </label>
          <button type="submit" class="btn success">Сгенерировать</button>
        </form>
        <div id="gen-result" class="onb-result hidden"></div>
      </section>

      <section class="card hidden" data-tab-section="day">
        <h2>День</h2>
        <form id="plan-form" class="form-grid" autocomplete="off">
          <label>
            <span>Касания (шт)</span>
            <input id="plan-touches" type="number" min="0" inputmode="numeric" placeholder="например, 20" />
          </label>
          <label>
            <span>Демо (шт)</span>
            <input id="plan-demos" type="number" min="0" inputmode="numeric" placeholder="например, 1" />
          </label>
          <label class="full">
            <span>Фокус (мин)</span>
            <input id="plan-focus" type="number" min="0" inputmode="numeric" placeholder="например, 90" />
          </label>
          <button type="submit" class="btn primary">Отправить план</button>
        </form>

        <form id="fact-form" class="form-grid" autocomplete="off">
          <label>
            <span>Касания +</span>
            <input id="fact-touches" type="number" min="0" inputmode="numeric" placeholder="например, 5" />
          </label>
          <label>
            <span>Демо +</span>
            <input id="fact-demos" type="number" min="0" inputmode="numeric" placeholder="например, 1" />
          </label>
          <label class="full">
            <span>Фокус + (мин)</span>
            <input id="fact-focus" type="number" min="0" inputmode="numeric" placeholder="например, 30" />
          </label>
          <button type="submit" class="btn success">Добавить факт</button>
        </form>
      </section>

      <section class="card hidden" data-tab-section="stats">
        <h2>Статистика</h2>
        <p class="subtitle">Здесь будет прогресс по идеальным дням и метрикам (MVP).</p>
        <div id="stats-box" class="onb-result">Пока пусто. Заполните «День» и вернитесь позже.</div>
      </section>
    </main>

    <script src="./app.js" type="module"></script>
  </body>
</html>
