<!DOCTYPE html>
<html lang="ru">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Grit-—Ç—Ä–µ–Ω–µ—Ä ‚Äî Mini App</title>
    <link rel="preconnect" href="https://telegram.org" />
    <link rel="stylesheet" href="./styles.css" />
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <style>
      .tab-section{display:none}
      .tab-section:not(.hidden){display:block}
    </style>
  </head>
  <body>
    <main class="container" id="app-root">
      <!-- Header -->
      <header class="header">
        <div class="hdr-left">
          <div class="avatar" id="avatar-initials" aria-label="–ê–≤–∞—Ç–∞—Ä">?</div>
        </div>
        <div class="hdr-center">
          <div class="level-text"><span class="lvl">LVL <span id="lvl-num">1</span>:</span> <strong id="lvl-title">–ù–æ–≤–∏—á–æ–∫</strong></div>
          <div class="lvl-bar"><div class="lvl-bar__fill" id="lvl-fill" style="width: 0%"></div></div>
        </div>
        <div class="hdr-right">
          <button class="icon-btn" data-tab="profile" aria-label="–ù–∞—Å—Ç—Ä–æ–π–∫–∏">‚öôÔ∏è</button>
        </div>
      </header>

      <!-- Tabs content -->
      <section class="tab-section" data-tab-section="path">
        <h2 class="sr-only">–ü—É—Ç—å</h2>
        <div class="card focus-card">
          <label class="focus-check">
            <input type="checkbox" id="focus-done" />
            <span class="focus-circle"></span>
            <span class="focus-text">–§–æ–∫—É—Å –¥–Ω—è: <span id="focus-text">‚Äî</span></span>
          </label>
          <div class="focus-done-banner">–û—Ç–ª–∏—á–Ω–∞—è —Ä–∞–±–æ—Ç–∞!</div>
        </div>

        <div class="widgets">
          <div class="widget streak">
            <div class="w-title">–°—Ç—Ä–∏–∫</div>
            <div class="w-value">üî• <strong id="streak-val">14</strong></div>
            <div class="w-sub">–¥–Ω–µ–π –≤ –ø—É—Ç–∏</div>
          </div>
          <div class="widget effort">
            <div class="w-title">–£—Å–∏–ª–∏—è –∑–∞ –Ω–µ–¥–µ–ª—é</div>
            <div class="effort-ring" data-effort="85">
              <div class="effort-ring__inner" id="effort-pct">0%</div>
            </div>
          </div>
        </div>

        <div class="card goals-compact">
          <div class="card-title">–ê–∫—Ç—É–∞–ª—å–Ω—ã–µ —Ü–µ–ª–∏</div>
          <ul class="gl-list" id="active-goals"></ul>
        </div>

        <button id="open-checkin" class="btn primary large">–ü–æ–¥–≤–µ—Å—Ç–∏ –∏—Ç–æ–≥–∏ –¥–Ω—è</button>
      </section>

      <section class="tab-section hidden" data-tab-section="goals">
        <h2 class="sr-only">–¶–µ–ª–∏</h2>
        <div class="card">
          <div class="card-title">–í—ã—Å—à–∞—è —Ü–µ–ª—å</div>
          <div class="gl-title">100 –≤–∏–¥–µ–æ –∑–∞ 100 –¥–Ω–µ–π</div>
        </div>
        <div class="card">
          <div class="card-title">–°—Ä–µ–¥–Ω–µ—Å—Ä–æ—á–Ω—ã–µ —Ü–µ–ª–∏</div>
          <div class="accordion">
            <details>
              <summary><span>–°—Ü–µ–Ω–∞—Ä–∏–∏</span> <span class="acc-progress">2/5</span></summary>
              <ul class="acc-tasks">
                <li><input type="checkbox"/> –¢–µ–º—ã –Ω–µ–¥–µ–ª–∏</li>
                <li><input type="checkbox"/> –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ä–æ–ª–∏–∫–æ–≤</li>
              </ul>
            </details>
            <details>
              <summary><span>–ú–æ–Ω—Ç–∞–∂</span> <span class="acc-progress">1/3</span></summary>
              <ul class="acc-tasks">
                <li><input type="checkbox"/> –ü—Ä–µ—Å–µ—Ç—ã</li>
              </ul>
            </details>
          </div>
        </div>

        <!-- –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ü–µ–ª—è–º–∏ -->
        <div class="card">
          <div class="card-title">–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ü–µ–ª—è–º–∏</div>
          <form id="goals-form">
            <label class="full">
              <span>–ì–ª–∞–≤–Ω–∞—è —Ü–µ–ª—å</span>
              <input id="goal-main" type="text" placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: 100 –≤–∏–¥–µ–æ –∑–∞ 100 –¥–Ω–µ–π" />
            </label>
            <label class="full">
              <span>–ü–æ–¥—Ü–µ–ª–∏ (—á–µ—Ä–µ–∑ –∑–∞–ø—è—Ç—É—é)</span>
              <textarea id="goal-sub" rows="3" placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: –°—Ü–µ–Ω–∞—Ä–∏–∏, –ú–æ–Ω—Ç–∞–∂, –ü—Ä–æ–¥–≤–∏–∂–µ–Ω–∏–µ"></textarea>
            </label>
            <button type="submit" class="btn primary">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å —Ü–µ–ª–∏</button>
          </form>
          <div id="goals-saved" class="result hidden"></div>
        </div>

        <!-- –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –ø–ª–∞–Ω–∞ -->
        <div class="card">
          <div class="card-title">–ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä –ø–ª–∞–Ω–∞</div>
          <form id="gen-form">
            <label class="full">
              <span>–ó–∞–¥–∞—á–∞</span>
              <input id="gen-task" type="text" placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: –°–æ–∑–¥–∞–≤–∞—Ç—å –≤–∏–¥–µ–æ –∫–∞–∂–¥—ã–π –¥–µ–Ω—å" required />
            </label>
            <label class="full">
              <span>–ß–∞—Å—Ç–æ—Ç–∞</span>
              <select id="gen-frequency" required>
                <option value="">–í—ã–±–µ—Ä–∏—Ç–µ —á–∞—Å—Ç–æ—Ç—É</option>
                <option value="daily">–ï–∂–µ–¥–Ω–µ–≤–Ω–æ</option>
                <option value="weekly">–ï–∂–µ–Ω–µ–¥–µ–ª—å–Ω–æ</option>
                <option value="monthly">–ï–∂–µ–º–µ—Å—è—á–Ω–æ</option>
              </select>
            </label>
            <label class="full">
              <span>–í—Ä–µ–º—è (–º–∏–Ω—É—Ç –≤ –¥–µ–Ω—å)</span>
              <input id="gen-time" type="number" min="5" max="480" placeholder="30" required />
            </label>
            <label class="full">
              <span>–û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)</span>
              <textarea id="gen-constraints" rows="2" placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: –¢–æ–ª—å–∫–æ —É—Ç—Ä–æ–º, –±–µ–∑ –æ—Ç–≤–ª–µ—á–µ–Ω–∏–π"></textarea>
            </label>
            <button type="submit" class="btn primary">–°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –ø–ª–∞–Ω</button>
          </form>
          <div id="gen-result" class="result hidden"></div>
        </div>

        <!-- –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø–ª–∞–Ω–∞ (–∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–µ —Å–ø–∏—Å–∫–∏) -->
        <div class="card" id="plan-structure-card">
          <div class="card-title">–°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø–ª–∞–Ω–∞</div>
          <div class="plan-block">
            <div class="plan-block-title">–ï–∂–µ–¥–Ω–µ–≤–Ω—ã–π —Ä–∏—Ç—É–∞–ª</div>
            <ul id="plan-daily-ritual" class="acc-tasks"></ul>
          </div>
          <div class="plan-block">
            <div class="plan-block-title">–ú–∏–Ω–∏‚Äë–ø–ª–∞–Ω –Ω–∞ –¥–µ–Ω—å</div>
            <ul id="plan-mini-plan" class="acc-tasks"></ul>
          </div>
          <div class="plan-block">
            <div class="plan-block-title">–§–æ–∫—É—Å‚Äë–±–ª–æ–∫–∏ (–ø–æ–º–µ—Å—è—á–Ω–æ)</div>
            <ul id="plan-focus-blocks" class="acc-tasks"></ul>
          </div>
          <div class="plan-block">
            <div class="plan-block-title">–ê–Ω—Ç–∏‚Äë—Å—Ä—ã–≤</div>
            <ul id="plan-anti-slip" class="acc-tasks"></ul>
          </div>
          <div class="plan-block">
            <div class="plan-block-title">–ú–∞—Ä–∫–µ—Ä—ã –Ω–µ–¥–µ–ª–∏</div>
            <ul id="plan-weekly-markers" class="acc-tasks"></ul>
          </div>
        </div>
      </section>

      <section class="tab-section hidden" data-tab-section="progress">
        <h2 class="sr-only">–ü—Ä–æ–≥—Ä–µ—Å—Å</h2>
        <div class="card">
          <div class="seg-switch">
            <button class="seg on" data-range="week">–ù–µ–¥–µ–ª—è</button>
            <button class="seg" data-range="month">–ú–µ—Å—è—Ü</button>
            <button class="seg" data-range="year">–ì–æ–¥</button>
          </div>
          <div class="heatmap-placeholder">–¢–µ–ø–ª–æ–≤–∞—è –∫–∞—Ä—Ç–∞ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏</div>
          <div class="kpi-grid">
            <div class="kpi"><div class="kpi-val" id="kpi-max-streak">0</div><div class="kpi-label">–ú–∞–∫—Å. —Å—Ç—Ä–∏–∫</div></div>
            <div class="kpi"><div class="kpi-val" id="kpi-total-checkins">0</div><div class="kpi-label">–î–Ω–µ–π —Å–æ—Ö—Ä–∞–Ω–µ–Ω–æ</div></div>
            <div class="kpi"><div class="kpi-val" id="kpi-avg-effort">0.0</div><div class="kpi-label">–°—Ä–µ–¥–Ω–∏–π –±–∞–ª–ª —É—Å–∏–ª–∏–π</div></div>
          </div>
        </div>
      </section>

      <section class="tab-section hidden" data-tab-section="gym">
        <h2 class="sr-only">–¢—Ä–µ–Ω–∞–∂—ë—Ä</h2>
        <div class="chip-row">
          <button class="chip on" data-chip="interest">–ò–Ω—Ç–µ—Ä–µ—Å</button>
          <button class="chip" data-chip="practice">–ü—Ä–∞–∫—Ç–∏–∫–∞</button>
          <button class="chip" data-chip="purpose">–¶–µ–ª—å</button>
          <button class="chip" data-chip="hope">–ù–∞–¥–µ–∂–¥–∞</button>
        </div>
        <div class="card">
          <div class="card-title">–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è –¥–Ω—è</div>
          <p>5 –º–∏–Ω—É—Ç: —Ä–∞–∑–æ–≥—Ä–µ–≤ ‚Äî —Ä–∞—Å–ø–∏—à–∏ 3 —Ç–µ–º—ã —Ä–æ–ª–∏–∫–æ–≤.</p>
        </div>
        <div class="card">
          <div class="exercise-list">
            <div class="ex-item"><span>‚è±Ô∏è 5 –º–∏–Ω</span> –û—Å–æ–∑–Ω–∞–Ω–Ω–∞—è –ø—Ä–∞–∫—Ç–∏–∫–∞: ¬´–º–∏–∫—Ä–æ—à–∞–≥–∏¬ª</div>
            <div class="ex-item"><span>‚è±Ô∏è 10 –º–∏–Ω</span> –¢–µ—Ö–Ω–∏–∫–∞ –ü–æ–º–∏–¥–æ—Ä–æ (1 —Å–ø—Ä–∏–Ω—Ç)</div>
          </div>
        </div>

        <!-- Grit-—Ç–µ—Å—Ç -->
        <div class="card">
          <div class="card-title">–¢–µ—Å—Ç –Ω–∞ Grit</div>
          <form id="grit-form">
            <label class="full">
              <span>–Ø —É–ø–æ—Ä–Ω–æ —Ä–∞–±–æ—Ç–∞—é –Ω–∞–¥ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–µ–º —Ü–µ–ª–µ–π (1-5)</span>
              <select required>
                <option value="">–í—ã–±–µ—Ä–∏—Ç–µ</option>
                <option value="1">1 - –°–æ–≤—Å–µ–º –Ω–µ –ø—Ä–æ –º–µ–Ω—è</option>
                <option value="2">2 - –°–∫–æ—Ä–µ–µ –Ω–µ –ø—Ä–æ –º–µ–Ω—è</option>
                <option value="3">3 - –ù–µ–π—Ç—Ä–∞–ª—å–Ω–æ</option>
                <option value="4">4 - –°–∫–æ—Ä–µ–µ –ø—Ä–æ –º–µ–Ω—è</option>
                <option value="5">5 - –ü–æ–ª–Ω–æ—Å—Ç—å—é –ø—Ä–æ –º–µ–Ω—è</option>
              </select>
            </label>
            <label class="full">
              <span>–Ø –Ω–µ —Å–¥–∞—é—Å—å –ø—Ä–∏ –Ω–µ—É–¥–∞—á–∞—Ö (1-5)</span>
              <select required>
                <option value="">–í—ã–±–µ—Ä–∏—Ç–µ</option>
                <option value="1">1 - –°–æ–≤—Å–µ–º –Ω–µ –ø—Ä–æ –º–µ–Ω—è</option>
                <option value="2">2 - –°–∫–æ—Ä–µ–µ –Ω–µ –ø—Ä–æ –º–µ–Ω—è</option>
                <option value="3">3 - –ù–µ–π—Ç—Ä–∞–ª—å–Ω–æ</option>
                <option value="4">4 - –°–∫–æ—Ä–µ–µ –ø—Ä–æ –º–µ–Ω—è</option>
                <option value="5">5 - –ü–æ–ª–Ω–æ—Å—Ç—å—é –ø—Ä–æ –º–µ–Ω—è</option>
              </select>
            </label>
            <label class="full">
              <span>–ú–æ–∏ –∏–Ω—Ç–µ—Ä–µ—Å—ã –º–µ–Ω—è—é—Ç—Å—è —Ä–µ–¥–∫–æ (1-5)</span>
              <select required>
                <option value="">–í—ã–±–µ—Ä–∏—Ç–µ</option>
                <option value="1">1 - –°–æ–≤—Å–µ–º –Ω–µ –ø—Ä–æ –º–µ–Ω—è</option>
                <option value="2">2 - –°–∫–æ—Ä–µ–µ –Ω–µ –ø—Ä–æ –º–µ–Ω—è</option>
                <option value="3">3 - –ù–µ–π—Ç—Ä–∞–ª—å–Ω–æ</option>
                <option value="4">4 - –°–∫–æ—Ä–µ–µ –ø—Ä–æ –º–µ–Ω—è</option>
                <option value="5">5 - –ü–æ–ª–Ω–æ—Å—Ç—å—é –ø—Ä–æ –º–µ–Ω—è</option>
              </select>
            </label>
            <button type="submit" class="btn primary">–†–∞—Å—Å—á–∏—Ç–∞—Ç—å Grit</button>
          </form>
          <div id="grit-result" class="result hidden"></div>
        </div>
      </section>

      <section class="tab-section hidden" data-tab-section="profile">
        <h2 class="sr-only">–ü—Ä–æ—Ñ–∏–ª—å</h2>
        <div class="card">
          <div class="card-title">–ü—Ä–æ—Ñ–∏–ª—å</div>
          <p>–ò–º—è: <span id="profile-name">‚Äî</span></p>
          <p>–ß–∞—Å–æ–≤–æ–π –ø–æ—è—Å: <span id="profile-tz">‚Äî</span></p>
        </div>
      </section>

      <!-- Bottom Tab Bar -->
      <nav class="tabbar" aria-label="–ù–∞–≤–∏–≥–∞—Ü–∏—è">
        <button class="tab on" data-tab="path">üèîÔ∏è<span>–ü—É—Ç—å</span></button>
        <button class="tab" data-tab="goals">üéØ<span>–¶–µ–ª–∏</span></button>
        <button class="tab" data-tab="progress">üìà<span>–ü—Ä–æ–≥—Ä–µ—Å—Å</span></button>
        <button class="tab" data-tab="gym">üß†<span>–¢—Ä–µ–Ω–∞–∂—ë—Ä</span></button>
        <button class="tab" data-tab="profile">üë§<span>–ü—Ä–æ—Ñ–∏–ª—å</span></button>
      </nav>
    </main>

    <!-- Evening Check-in Modal -->
    <div id="checkin-modal" class="modal hidden" role="dialog" aria-modal="true" aria-labelledby="chk-title">
      <div class="modal-backdrop" data-close="checkin"></div>
      <div class="modal-card">
        <h2 id="chk-title">–ö–∞–∫ –ø—Ä–æ—à—ë–ª —Ç–≤–æ–π –¥–µ–Ω—å?</h2>
        <label class="full"><span>–û—Ü–µ–Ω–∏ —É—Å–∏–ª–∏—è (1‚Äì5)</span>
          <input id="chk-effort" type="range" min="1" max="5" step="1" value="3" />
        </label>
        <label class="full"><span>–ì–ª–∞–≤–Ω–∞—è –ø–æ–±–µ–¥–∞ —Å–µ–≥–æ–¥–Ω—è</span>
          <textarea id="chk-win" rows="3" placeholder="–ö–æ—Ä–æ—Ç–∫–æ‚Ä¶"></textarea>
        </label>
        <label class="full"><span>–ß—Ç–æ –±—ã–ª–æ —Å–∞–º—ã–º —Å–ª–æ–∂–Ω—ã–º?</span>
          <textarea id="chk-challenge" rows="3" placeholder="–ö–æ—Ä–æ—Ç–∫–æ‚Ä¶"></textarea>
        </label>
        <div class="onb-actions">
          <button id="chk-save" class="btn primary">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å –¥–µ–Ω—å</button>
          <button class="btn ghost" data-close="checkin">–û—Ç–º–µ–Ω–∞</button>
        </div>
      </div>
    </div>

    <script src="./app.js" type="module"></script>
  </body>
</html>
